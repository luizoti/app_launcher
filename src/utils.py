import base64

from PyQt5.QtGui import QIcon, QImage, QPixmap

icon_connected = """PHN2ZyB2ZXJzaW9uPSIxLjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIj4KCTx0aXRsZT5rb2RpLXN2ZzwvdGl0bGU+Cgk8c3R5bGU+CgkJLnMwIHsgZmlsbDogI2ZmZmZmZiB9IAoJCS5zMSB7IGZpbGw6ICMwMGZmMTggfSAKCQkuczIgeyBmaWxsOiAjMTdiMmU3IH0gCgk8L3N0eWxlPgoJPHBhdGggaWQ9IkZvcm1hIDEiIGNsYXNzPSJzMCIgZD0ibTcwIDBoMzcyYzM4LjcgMCA3MCAzMS4zIDcwIDcwdjM3MmMwIDM4LjctMzEuMyA3MC03MCA3MGgtMzcyYy0zOC43IDAtNzAtMzEuMy03MC03MHYtMzcyYzAtMzguNyAzMS4zLTcwIDcwLTcweiIvPgoJPHBhdGggaWQ9IkZvcm1hIDEgY29weSIgY2xhc3M9InMxIiBkPSJtNzAgMGgzNzJjMzguNyAwIDcwIDMxLjMgNzAgNzB2MzcyYzAgMzguNy0zMS4zIDcwLTcwIDcwaC0zNzJjLTM4LjcgMC03MC0zMS4zLTcwLTcwdi0zNzJjMC0zOC43IDMxLjMtNzAgNzAtNzB6Ii8+Cgk8Zz4KCQk8cGF0aCBjbGFzcz0iczIiIGQ9Im00NDEuNSAyNjkuNWwtNTguNSA1OC40Yy03IDctMTQuNSA3LTIxLjUgMGwtNjAuMy02MC40Yy02LjgtNi44LTYuOC0xNC4zIDAtMjEuMWw2MC42LTYwLjdjNi42LTYuNSAxNC4zLTYuNSAyMC45IDBsNTguNyA1OC44YzkgOC43IDguNCAxNi42IDAgMjV6Ii8+CgkJPHBhdGggY2xhc3M9InMyIiBkPSJtMjQ1IDQ0MWwtNTguMy01OC41Yy03LTctNy0xNC40IDAtMjEuNGw2MC40LTYwLjRjNi43LTYuNyAxNC4zLTYuNyAyMSAwbDYwLjQgNjAuNGM2LjkgNi45IDcgMTQuNSAwIDIxLjRsLTU4LjggNTljLTguNiA4LjctMTYuNSA3LjYtMjQuNy0wLjZ6Ii8+CgkJPHBhdGggY2xhc3M9InMyIiBkPSJtMTg0IDE0MS41YzAtNi41IDEuNS0xMS42IDYuNC0xNS44IDE4LjgtMTguNCAzOS0zOC45IDU1LjYtNTUuNSA3LTcgMTQuNC03IDIxLjMgMGw2MC4zIDYwLjNjNi45IDYuOSA2LjkgMTQuNSAwIDIxLjRsLTEzNC4yIDEzNC4zYy03LjggNC4yLTktMS41LTkuMi03LjctMC40LTQ3LjEgMC40LTkzLjItMC4yLTEzN3oiLz4KCQk8cGF0aCBjbGFzcz0iczIiIGQ9Im0xMzYuMSAzMTljMC4xIDUuMi0zLjcgMTAuOS03LjcgN2wtNjEtNjFjLTEuMS0xLTEuOS0yLjItMi41LTMuNS0wLjYtMS4zLTAuOS0yLjctMC45LTQuMiAwLTEuNSAwLjMtMi45IDAuOS00LjIgMC42LTEuMyAxLjQtMi41IDIuNS0zLjVsNjAuMi02MWM1LjUtNS42IDguMiAxLjYgOC41IDYuN3oiLz4KCTwvZz4KPC9zdmc+"""
icon_disconnected = """PHN2ZyB2ZXJzaW9uPSIxLjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIj4KCTx0aXRsZT5rb2RpLXN2ZzwvdGl0bGU+Cgk8c3R5bGU+CgkJLnMwIHsgZmlsbDogI2ZmZmZmZiB9IAoJCS5zMSB7IGZpbGw6ICMxN2IyZTcgfSAKCTwvc3R5bGU+Cgk8cGF0aCBpZD0iRm9ybWEgMSIgY2xhc3M9InMwIiBkPSJtNzAgMGgzNzJjMzguNyAwIDcwIDMxLjMgNzAgNzB2MzcyYzAgMzguNy0zMS4zIDcwLTcwIDcwaC0zNzJjLTM4LjcgMC03MC0zMS4zLTcwLTcwdi0zNzJjMC0zOC43IDMxLjMtNzAgNzAtNzB6Ii8+Cgk8Zz4KCQk8cGF0aCBjbGFzcz0iczEiIGQ9Im00NDEuNSAyNjkuNWwtNTguNSA1OC40Yy03IDctMTQuNSA3LTIxLjUgMGwtNjAuMy02MC40Yy02LjgtNi44LTYuOC0xNC4zIDAtMjEuMWw2MC42LTYwLjdjNi42LTYuNSAxNC4zLTYuNSAyMC45IDBsNTguNyA1OC44YzkgOC43IDguNCAxNi42IDAgMjV6Ii8+CgkJPHBhdGggY2xhc3M9InMxIiBkPSJtMjQ1IDQ0MWwtNTguMy01OC41Yy03LTctNy0xNC40IDAtMjEuNGw2MC40LTYwLjRjNi43LTYuNyAxNC4zLTYuNyAyMSAwbDYwLjQgNjAuNGM2LjkgNi45IDcgMTQuNSAwIDIxLjRsLTU4LjggNTljLTguNiA4LjctMTYuNSA3LjYtMjQuNy0wLjZ6Ii8+CgkJPHBhdGggY2xhc3M9InMxIiBkPSJtMTg0IDE0MS41YzAtNi41IDEuNS0xMS42IDYuNC0xNS44IDE4LjgtMTguNCAzOS0zOC45IDU1LjYtNTUuNSA3LTcgMTQuNC03IDIxLjMgMGw2MC4zIDYwLjNjNi45IDYuOSA2LjkgMTQuNSAwIDIxLjRsLTEzNC4yIDEzNC4zYy03LjggNC4yLTktMS41LTkuMi03LjctMC40LTQ3LjEgMC40LTkzLjItMC4yLTEzN3oiLz4KCQk8cGF0aCBjbGFzcz0iczEiIGQ9Im0xMzYuMSAzMTljMC4xIDUuMi0zLjcgMTAuOS03LjcgN2wtNjEtNjFjLTEuMS0xLTEuOS0yLjItMi41LTMuNS0wLjYtMS4zLTAuOS0yLjctMC45LTQuMiAwLTEuNSAwLjMtMi45IDAuOS00LjIgMC42LTEuMyAxLjQtMi41IDIuNS0zLjVsNjAuMi02MWM1LjUtNS42IDguMiAxLjYgOC41IDYuN3oiLz4KCTwvZz4KPC9zdmc+"""


def base64_to_icon(connected=False):
    image = QImage()
    image.loadFromData(
        base64.b64decode(icon_disconnected if not connected else icon_connected)
    )
    return QIcon(QPixmap.fromImage(image))


def is_controller_connected():
    """Verifica se o dispositivo especificado está conectado."""
    device_name = "Sony Computer Entertainment Inc BD Remote Control"
    try:
        with open("/proc/bus/input/devices", "r") as file:
            if device_name in file.read():
                return True
    except FileNotFoundError:
        print("Arquivo /proc/bus/input/devices não encontrado.")
    return False
